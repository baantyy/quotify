"use strict";var quoteUrl="https://banty.in/json/quotes",body=document.getElementsByTagName("body")[0];if(body.classList.contains("randomApiQuotes")){var getRandomQuoteFromUrl=function(){var e=new XMLHttpRequest;e.open("GET",quoteUrl,!0),e.send(),e.onload=function(){var t=JSON.parse(e.responseText),o=Math.floor(Math.random()*t.length);imgLoaderHandle.classList.add("d-none"),quoteHandle.innerHTML=t[o].quote,authorHandle.innerHTML=t[o].author,saveToLocal.classList.contains("saved")&&(saveToLocal.classList.remove("saved"),saveToLocalText.innerHTML="Save to Local")},e.onerror=function(){imgLoaderHandle.classList.add("d-none"),quoteHandle.innerHTML="Unable to get random quote"}},randomQuoteBtn=document.getElementById("randomQuoteBtn"),quoteHandle=document.getElementById("quote"),authorHandle=document.getElementById("author"),imgLoaderHandle=document.getElementById("imgLoader"),saveToLocal=document.getElementById("saveToLocal"),saveToLocalText=document.getElementById("saveToLocalText");getRandomQuoteFromUrl(),randomQuoteBtn.addEventListener("click",function(){quoteHandle.innerHTML="",authorHandle.innerHTML="",imgLoaderHandle.classList.remove("d-none"),getRandomQuoteFromUrl()});var localQuotes=[];localStorage.getItem("localQuotes")?localQuotes=JSON.parse(localStorage.getItem("localQuotes")):localStorage.setItem("localQuotes",JSON.stringify(localQuotes)),saveToLocal.addEventListener("click",function(e){if(e.preventDefault(),!saveToLocal.classList.contains("saved")){var t={id:Number(new Date)+Math.round(1e3*Math.random()),quote:quoteHandle.innerHTML,author:authorHandle.innerHTML};localQuotes.push(t),localStorage.setItem("localQuotes",JSON.stringify(localQuotes)),saveToLocal.classList.add("saved"),saveToLocalText.innerHTML="Saved",console.log(localQuotes)}})}else if(body.classList.contains("randomLocalQuotes")){var getRandomQuoteFromLocal=function(){if(_localQuotes.length>0){var e=Math.floor(Math.random()*_localQuotes.length);_quoteHandle.innerHTML=_localQuotes[e].quote,_authorHandle.innerHTML=_localQuotes[e].author}},_randomQuoteBtn=document.getElementById("randomQuoteBtn"),_quoteHandle=document.getElementById("quote"),_authorHandle=document.getElementById("author"),_localQuotes=[];localStorage.getItem("localQuotes")&&(_localQuotes=JSON.parse(localStorage.getItem("localQuotes"))),console.log(_localQuotes),getRandomQuoteFromLocal(),_randomQuoteBtn.addEventListener("click",function(){getRandomQuoteFromLocal()})}else if(body.classList.contains("addQuote")){var quoteForm=document.getElementById("quoteForm"),saveQuoteBtn=document.getElementById("saveQuoteBtn"),_quoteHandle2=document.getElementById("quote"),_authorHandle2=document.getElementById("author"),quoteErrorHandle=document.getElementById("quoteError"),authorErrorHandle=document.getElementById("authorError"),formStatus=document.getElementById("formStatus");quoteForm.addEventListener("submit",function(e){if(e.preventDefault(),quoteErrorHandle.innerHTML="",authorErrorHandle.innerHTML="",formStatus.innerHTML="",quoteErrorHandle.classList.add("d-none"),authorErrorHandle.classList.add("d-none"),formStatus.classList.add("d-none"),""==_quoteHandle2.value)quoteErrorHandle.classList.remove("d-none"),quoteErrorHandle.innerHTML="<span class='error'>Quote is required</span>";else if(""==_authorHandle2.value)authorErrorHandle.classList.remove("d-none"),authorErrorHandle.innerHTML="<span class='error'>Author name is required</span>";else{var t=[];localStorage.getItem("localQuotes")?t=JSON.parse(localStorage.getItem("localQuotes")):localStorage.setItem("localQuotes",JSON.stringify(t));var o={id:Number(new Date)+Math.round(1e3*Math.random()),quote:_quoteHandle2.value,author:_authorHandle2.value};console.log(o),t.push(o),localStorage.setItem("localQuotes",JSON.stringify(t)),formStatus.classList.remove("d-none"),formStatus.innerHTML="<span class='success'>Successfully saved new Quote</span>",quoteForm.reset()}})}else if(body.classList.contains("listAllQuotes")){var deleteQuote=function(e){if(confirm("Are you sure ?")){var t=_localQuotes3.findIndex(function(t){return t.id==e});_localQuotes3.splice(t,1),localStorage.setItem("localQuotes",JSON.stringify(_localQuotes3)),showAllQuotes()}},editQuote=function(e,t){var o=_localQuotes3.findIndex(function(e){return e.id==t}),a=_localQuotes3[o].quote,n=_localQuotes3[o].author,l=e.closest("div.quoteItem"),r=l.querySelector(".view"),s=l.querySelector(".edit");r.classList.add("d-none"),s.innerHTML='<form class="quoteForm" action="#0"><textarea placeholder="Quote">'.concat(a,'</textarea><p class="status d-none quoteError"></p><input type="text" placeholder="Author Name" value="').concat(n,'"><p class="status d-none authorError"></p><div class="updatebtn"><button type="button" class="getQuote" onclick="updateQuote(this,').concat(t,')">Update</button><button type="button" class="getQuote cancel" onclick="cancelQuoteEdit(this)">Cancel</button></div><p class="status d-none"></p></form>')},cancelQuoteEdit=function(e){var t=e.closest("div.quoteItem"),o=t.querySelector(".view");t.querySelector(".edit").innerHTML="",o.classList.remove("d-none")},updateQuote=function(e,t){var o=e.closest("div.quoteItem"),a=o.querySelector(".view"),n=o.querySelector(".edit"),l=o.querySelector("p.quote"),r=o.querySelector("p.author"),s=e.closest("form.quoteForm"),u=s.querySelector("textarea").value,c=s.querySelector("input").value,d=s.querySelector(".quoteError");d.innerHTML="";var i=s.querySelector(".authorError");i.innerHTML="",d.classList.add("d-none"),i.classList.add("d-none");var m=_localQuotes3.findIndex(function(e){return e.id==t});""==u?(d.classList.remove("d-none"),d.innerHTML="<span class='error'>Quote is required</span>"):""==c?(i.classList.remove("d-none"),i.innerHTML="<span class='error'>Author name is required</span>"):(_localQuotes3[m].quote=u,_localQuotes3[m].author=c,localStorage.setItem("localQuotes",JSON.stringify(_localQuotes3)),n.innerHTML="",l.innerHTML=u,r.innerHTML=c,a.classList.remove("d-none"))},showAllQuotes=function(){var e="";_localQuotes3.forEach(function(t){var o=t.id,a=t.quote,n=t.author;e+='<div class="quoteItem"><div class="view"><p class="quote">'.concat(a,'</p><p class="author">').concat(n,'</p><div class="action"><button title="Edit" onclick="editQuote(this,').concat(o,')"><img src="edit.png"></button><button title="Delete" onclick="deleteQuote(').concat(o,')"><img src="delete.png"></button>\n</div></div><div class="edit"></div></div>')}),quoteList.innerHTML=e},quoteList=document.getElementById("quoteList"),_localQuotes3=[];localStorage.getItem("localQuotes")&&(_localQuotes3=JSON.parse(localStorage.getItem("localQuotes"))),showAllQuotes()}